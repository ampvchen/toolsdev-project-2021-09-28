<div>
  <div class="my-4 d-flex place-items-center justify-content-between">
    <div class="d-flex place-items-center">
      <div class="dropdown">
        <button class="btn border hover:bg-gray-300 dropdown-toggle" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" data-bs-offset="0,10" aria-expanded="false">
          <%= Location.first.nickname%>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenuLocation">
          <% Location.all.each do |location| %>
            <li><a class="dropdown-item" href="#"><%= location.city%>, <%= location.state %> (<%= location.nickname %>)</a></li>
          <% end %>
        </ul>
      </div>
    </div>
    <div class="d-flex place-items-center">
      <div style="height: 24px; width: 24px;">
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="sun" class="svg-inline--fa fa-sun text-yellow-400" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"></path></svg>
      </div>
      <div class="align-text-middle text-muted ms-2">90&deg; F</div>
    </div>
  </div>

  <div style="padding: 3px 0 1px; background: white;" class="rounded-3 my-4">
    <div id="container1" class="my-3" style="height: 480px; min-width: 310px"></div>
  </div>
  <div style="padding: 3px 0 1px; background: white;" class="rounded-3 my-4">
    <div id="container2" class="my-3" style="height: 480px; min-width: 310px"></div>
  </div>

  <div class="text-end">
    <p class="fs-6 text-muted">Last updated: <%= DateTime.now.strftime('%F, %T') %></p>
  </div>

</div>

<script>
  var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
  var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
    return new bootstrap.Tooltip(tooltipTriggerEl)
  });
</script>

<script>
  var loc = { name: "Austin HQ" }
  Highcharts.getJSON('https://demo-live-data.highcharts.com/aapl-c.json', function (data) {
    Highcharts.setOptions({
      lang: {
        rangeSelectorFrom: 'From',
        rangeSelectorTo: 'To'
      }
    });
    Highcharts.stockChart('container1', {
      exporting: false,
      legend: { enabled: true },
      rangeSelector: {
        buttonTheme: { // styles for the buttons
          fill: 'none',
          stroke: 'none',
          'stroke-width': 0,
          r: 4,
          style: {
            color: 'gray',
            fontWeight: 'normal'
          },
          states: {
            hover: {
            },
            select: {
              fill: '#0D52FF',
              style: {
                color: 'white'
              }
            }
            // disabled: { ... }
          }
        },
        // inputBoxBorderColor: 'transparent',
        // inputBoxWidth: 120,
        // inputBoxHeight: 18,
        inputStyle: {
          color: '#0D52FF',
          fontWeight: 'bold'
        },
        labelStyle: {
          color: 'gray',
          fontWeight: 'bold'
        },
        selected: 1
      },

      title: {
        text: `Weather for <b>${loc.name}</b>`
      },

      series: [{
        name: 'AAPL',
        data: data,
        type: 'spline',
        tooltip: {
          valueDecimals: 2
        }
      }],

      responsive: {
        rules: [{
          condition: {
            maxWidth: 500
          },
          chartOptions: {
            chart: {
              height: 400
            },
            subtitle: {
              text: null
            },
            navigator: {
              enabled: false
            }
          }
        }]
      }
    });
  });

</script>

<script>
  Highcharts.getJSON('https://demo-live-data.highcharts.com/aapl-c.json', function (data) {
    Highcharts.setOptions({
      lang: {
        rangeSelectorFrom: 'From',
        rangeSelectorTo: 'To'
      }
    });
    Highcharts.stockChart('container2', {
      exporting: false,
      legend: { enabled: true },
      rangeSelector: {
        buttonTheme: { // styles for the buttons
          fill: 'none',
          stroke: 'none',
          'stroke-width': 0,
          r: 4,
          style: {
            color: 'gray',
            fontWeight: 'normal'
          },
          states: {
            hover: {
            },
            select: {
              fill: '#0D52FF',
              style: {
                color: 'white'
              }
            }
            // disabled: { ... }
          }
        },
        // inputBoxBorderColor: 'transparent',
        // inputBoxWidth: 120,
        // inputBoxHeight: 18,
        inputStyle: {
          color: '#0D52FF',
          fontWeight: 'bold'
        },
        labelStyle: {
          color: 'gray',
          fontWeight: 'bold'
        },
        selected: 1
      },


      title: {
        text: '3-Hour Highs and Lows'
      },

      series: [{
        name: 'AAPL',
        data: data,
        type: 'spline',
        tooltip: {
          valueDecimals: 2
        }
      }],

      responsive: {
        rules: [{
          condition: {
            maxWidth: 500
          },
          chartOptions: {
            chart: {
              height: 400
            },
            subtitle: {
              text: null
            },
            navigator: {
              enabled: false
            }
          }
        }]
      }
    });
  });

</script>

