<div class="my-2">
  <div class="d-flex place-items-center">
    <div class="align-text-middle text-muted">Select Location:</div>
    <div class="dropdown">
      <button class="btn btn-primary dropdown-toggle ms-2" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" data-bs-offset="0,10" aria-expanded="false">
        <%= Location.first.nickname%>
      </button>
      <ul class="dropdown-menu" aria-labelledby="dropdownMenuLocation">
        <% Location.all.each do |location| %>
          <li><a class="dropdown-item" href="#"><%= location.city%>, <%= location.state %> (<%= location.nickname %>)</a></li>
        <% end %>
      </ul>
    </div>
  </div>
</div>

<div id="chart" style="height: 400px;" class="my-4 rounded"></div>

<script>
  Highcharts.chart('chart', {
    chart: {
      type: 'spline',
      scrollablePlotArea: {
        minWidth: 600,
        scrollPositionX: 1
      }
    },
    title: {
      text: 'Weather for Austin HQ',
      align: 'center'
    },
    xAxis: {
      type: 'datetime',
      labels: {
        overflow: 'justify'
      }
    },
    yAxis: {
      title: { text: '' },
      minorGridLineWidth: 0,
      gridLineWidth: 1,
      alternateGridColor: null,
      plotBands: [{
        from: 0.3,
        to: 1.5,
        to: 8,
        color: 'rgba(0, 0, 0, 0)',
      }, {
        from: 1.5,
        to: 3.3,
        to: 8,
        color: 'rgba(0, 0, 0, 0)',
      }, {
        from: 3.3,
        to: 5.5,
        to: 8,
        color: 'rgba(0, 0, 0, 0)',
      }, {
        from: 5.5,
        to: 8,
        color: 'rgba(0, 0, 0, 0)',
      }, {
        from: 8,
        to: 11,
        color: 'rgba(0, 0, 0, 0)',
      }, {
        from: 11,
        to: 14,
        color: 'rgba(0, 0, 0, 0)',
      }, {
        from: 14,
        to: 15,
        color: 'rgba(0, 0, 0, 0)',
      }]
    },
    tooltip: {
      valueSuffix: ' m/s'
    },
    plotOptions: {
      spline: {
        lineWidth: 2,
        states: {
          hover: {
            lineWidth: 4
          }
        },
        marker: {
          enabled: false
        },
        pointInterval: 3600000, // one hour
        pointStart: Date.UTC(2018, 1, 13, 0, 0, 0)
      }
    },
    series: [{
      name: 'Historical',
      data: [
        3.7, 3.3, 3.9, 5.1, 3.5, 3.8, 4.0, 5.0, 6.1, 3.7, 3.3, 6.4,
        6.9, 6.0, 6.8, 4.4, 4.0, 3.8, 5.0, 4.9, 9.2, 9.6, 9.5, 6.3,
        9.5, 10.8, 14.0, 11.5, 10.0, 10.2, 10.3, 9.4, 8.9, 10.6, 10.5, 11.1,
        10.4, 10.7, 11.3, 10.2, 9.6, 10.2, 11.1, 10.8, 13.0, 12.5, 12.5, 11.3,
        10.1
      ]

    }, {
      name: 'Forecast',
      data: [
        0.2, 0.1, 0.1, 0.1, 0.3, 0.2, 0.3, 0.1, 0.7, 0.3, 0.2, 0.2,
        0.3, 0.1, 0.3, 0.4, 0.3, 0.2, 0.3, 0.2, 0.4, 0.0, 0.9, 0.3,
        0.7, 1.1, 1.8, 1.2, 1.4, 1.2, 0.9, 0.8, 0.9, 0.2, 0.4, 1.2,
        0.3, 2.3, 1.0, 0.7, 1.0, 0.8, 2.0, 1.2, 1.4, 3.7, 2.1, 2.0,
        1.5
      ]
    }],
    navigation: {
      menuItemStyle: {
        fontSize: '10px'
      }
    }
  });
</script>


